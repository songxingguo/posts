---
created: 2024-08-30 11:12
modified: 2024-08-30 11:12
Type: Entity
tags:
  - ç¼–ç¨‹/Vue
publish: true
date: 2024-08-30 11:12
path: tech/addroutes
categories:
  - å‰ç«¯
description: åœ¨å·¥ä½œä¸­é‡åˆ°åˆ‡æ¢å³ä¾§çš„æ¸¸æˆï¼Œç„¶åéœ€è¦ä½¿ç”¨addRoutesåŠ¨æ€æ·»åŠ å¯¹åº”çš„è·¯ç”±çš„æƒ…å†µã€‚å¦‚æœæ˜¯æ·»åŠ ä¸åŒè·¯å¾„çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å½“å…ˆåæ·»åŠ çš„è·¯å¾„ä¸€æ ·ï¼Œé‚£ä¹ˆVueRouter åˆ™ä¸ä¼šä½¿ç”¨åé¢æ·»åŠ çš„è·¯å¾„è¦†ç›–å‰é¢çš„è·¯å¾„ï¼Œè€Œæ˜¯ä»€ä¹ˆä¹Ÿä¸åšã€‚
title: addroutes æ·»åŠ åŠ¨æ€è·¯ç”±ç›¸åŒè·¯å¾„ä¸è¦†ç›–é—®é¢˜
Obsidianåœ°å€: obsidian://open?vault=content&file=C%20Knowledge%2F%E5%89%8D%E7%AB%AF%2F%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%2FVue%2FVue%E6%95%99%E7%A8%8B%2Faddroutes%20%E6%B7%BB%E5%8A%A0%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9B%B8%E5%90%8C%E8%B7%AF%E5%BE%84%E4%B8%8D%E8%A6%86%E7%9B%96%E9%97%AE%E9%A2%98.md
---
## ç›®å½•
## å†™åœ¨å‰é¢

![addroutes æ·»åŠ åŠ¨æ€è·¯ç”±ç›¸åŒè·¯å¾„ä¸è¦†ç›–é—®é¢˜ 20240831224941752](https://image.songxingguo.com/obsidian/20240831/addroutes%20%E6%B7%BB%E5%8A%A0%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9B%B8%E5%90%8C%E8%B7%AF%E5%BE%84%E4%B8%8D%E8%A6%86%E7%9B%96%E9%97%AE%E9%A2%98-20240831224941752.webp)

åœ¨å·¥ä½œä¸­é‡åˆ°åˆ‡æ¢å³ä¾§çš„æ¸¸æˆï¼Œç„¶åéœ€è¦ä½¿ç”¨addRoutesåŠ¨æ€æ·»åŠ å¯¹åº”çš„è·¯ç”±çš„æƒ…å†µã€‚å¦‚æœæ˜¯æ·»åŠ ä¸åŒè·¯å¾„çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å½“å…ˆåæ·»åŠ çš„è·¯å¾„ä¸€æ ·ï¼Œé‚£ä¹ˆVueRouter åˆ™ä¸ä¼šä½¿ç”¨åé¢æ·»åŠ çš„è·¯å¾„è¦†ç›–å‰é¢çš„è·¯å¾„ï¼Œè€Œæ˜¯ä»€ä¹ˆä¹Ÿä¸åšã€‚

```html
<router-link to="/">æ·˜ç±³å®¢æœå¹³å°</router-link>
```

ä¹Ÿå°±å¯¼è‡´åœ¨åˆ‡æ¢äº†æ¸¸æˆä¹‹åï¼Œå½“æˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„ã€æ·˜å®å®¢æœå¹³å°ã€‘å¸Œæœ›è·³è½¬åˆ°å½“å‰æ¸¸æˆçš„é¦–é¡µæ—¶ï¼Œä¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªæ¸¸æˆçš„é¦–é¡µã€‚ä¸»è¦å°±æ˜¯å› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨ addRoutes æ·»åŠ ä¸º `/`  æ·»åŠ æ–°çš„ redirect åœ°å€ï¼Œå¹¶æ²¡æœ‰è¦†ç›–è€çš„ redirect åœ°å€å¯¼è‡´çš„ã€‚

```js
router.addRoutes([{ path: '/', redirect: '/seer'}]);
```

ä¸‹é¢ğŸ‘‡æ˜¯ç»è¿‡å¤šæ–¹éªŒè¯ä¹‹åæ‰¾åˆ°çš„æœ€ä½³å®è·µã€‚

## å…·ä½“å®ç°

å› ä¸ºå…¬å¸é¡¹ç›®æ˜¯Vue2é¡¹ç›®ï¼Œå› æ­¤ VueRouter æœ€é«˜çš„ç‰ˆæœ¬åªèƒ½ä½¿ç”¨ 3.6.5ï¼Œä¸èƒ½æ”¯æŒ [removeRoute](https://router.vuejs.org/zh/api/interfaces/Router.html#Methods-removeRoute) å…ˆç§»é™¤è·¯ç”±  `\`ï¼Œ å†é‡æ–°æ·»åŠ è·¯ç”± `\`ã€‚å¹¶ä¸”ç»è¿‡æµ‹è¯• [`addRoute` ](https://v3.router.vuejs.org/zh/api/#router-addroute)ä¹Ÿå¹¶ä¸èƒ½å¦‚æ–‡æ¡£æ‰€è¯´ã€æ·»åŠ ä¸€æ¡æ–°çš„è·¯ç”±è§„åˆ™è®°å½•ä½œä¸ºç°æœ‰è·¯ç”±çš„å­è·¯ç”±ã€‚å¦‚æœè¯¥è·¯ç”±è§„åˆ™æœ‰Â `name`ï¼Œå¹¶ä¸”å·²ç»å­˜åœ¨ä¸€ä¸ªä¸ä¹‹ç›¸åŒçš„åå­—ï¼Œåˆ™ä¼šè¦†ç›–å®ƒã€‘ã€‚æœ€åæˆ‘ä»¬åªèƒ½å¦è¾Ÿè¹Šå¾„ï¼Œé€šè¿‡é‡å†™ `addRoutes` æ¥å®ç°æˆ‘ä»¬éœ€è¦è¦†ç›–ç›¸åŒè·¯å¾„çš„éœ€æ±‚ã€‚

```js
const createRouter = (routes) => {
  return new VueRouter({
    mode: process.env.VUE_APP_ROUTER_MODE,
    base: process.env.BASE_URL,
    routes,
  });
};
 
const router = createRouter(routes);
 
// é‡å†™addRoutes
const addRoute = VueRouter.prototype.addRoute;
VueRouter.prototype.addRoutes = function (newRoutes) {
  const routers = router.getRoutes();
  newRoutes = [...newRoutes, ...routers];
  router.matcher = createRouter(newRoutes).matcher; //é€šè¿‡é‡ç½®matcheræ¥é‡ç½®router
  addRoute.call(this, ...newRoutes); //è°ƒç”¨åŸæœ‰æ–¹æ³•
};
```

ä¸Šé¢ä»£ç ä¸­ `newRoutes = [...newRoutes, ...routers]` å°±æ˜¯æœ€å…³é”®ä»£ç ï¼Œä¸»è¦æ˜¯å°†æ–°æ·»åŠ çš„è·¯ç”±æ”¾å‰é¢ï¼Œåœ¨è°ƒç”¨addRouteçš„æ—¶å€™ï¼Œåé¢æ·»åŠ çš„ç›¸åŒè·¯ç”±å°±ä¸ä¼šè¢«`VueRouter`æ·»åŠ ã€‚åˆç”±äº `addRoutes` å®˜æ–¹å·²ç»==ä¸æ¨è==ä½¿ç”¨äº†ï¼Œå› æ­¤åœ¨é‡å†™ addRoutes æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `addRoute.call(this, ...newRoutes)` æ¥å®ç°è·¯ç”±çš„åŠ¨æ€æ·»åŠ ã€‚ 

## å†™åœ¨åé¢

æœ€åé€šè¿‡è¿™æ¬¡çš„é—®é¢˜ï¼Œæˆ‘å­¦ä¼šå½“ç¬¬ä¸‰æ–¹æ’ä»¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `VueRouter.prototype.addRoute` å’Œ `addRoute.call(this, ...newRoutes)`é‡å†™æ’ä»¶çš„åŸæœ‰æ–¹æ³•ï¼Œä»è€Œè¾¾åˆ°æ»¡è¶³æˆ‘ä»¬ä¸šåŠ¡éœ€æ±‚çš„ç›®çš„ï¼Œç›¸å½“äºåœ¨åŸæ’ä»¶çš„åŸºç¡€ä¸Šåšäº†ä¸€ä¸‹æˆ‘ä»¬è‡ªå·±çš„å°è£…ã€‚

å½“ç„¶éœ€è¦æ³¨æ„çš„æ˜¯ç›´æ¥åœ¨åŸå‹é“¾ä¸Šä¿®æ”¹æ’ä»¶çš„åŸæœ‰æ–¹æ³•ä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½å¯å–çš„ï¼Œåªæœ‰åœ¨å®Œå…¨ç¡®è®¤ï¼Œé¡¹ç›®ä¸­æ‰€æœ‰ä½¿ç”¨ `addRoutes` çš„åœ°æ–¹éƒ½ä¼šä½¿ç”¨é‡å†™åçš„é€»è¾‘æ‰èƒ½ç›´æ¥ä¿®æ”¹æ’ä»¶æ–¹æ³•ï¼Œå¦åˆ™ä¼šå¯¹åç»­å¼€å‘è€…çš„å¼€å‘äº§ç”Ÿå·¨å¤§çš„ç–‘æƒ‘ã€‚

